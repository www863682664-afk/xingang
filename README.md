# 构型助手 (Configuration Assistant)

构型助手是一款基于微信小程序的团队协作工具，旨在让团队协作更轻松、高效。

## 功能特性

小程序包含以下四大核心功能模块：

1.  **抽签助手 (Draw)**
    *   随机抽取，幸运降临。
    *   支持群组名单管理，名单存储于云端数据库，永久保存，不会因更换设备或清除缓存而丢失。
    *   支持离线模式，无网络时可使用本地缓存数据。

2.  **接龙报名 (Solitaire)**
    *   活动统计，轻松管理。
    *   发起新接龙，支持自定义标题、描述及多种表单项（文本、图片、多选）。
    *   **数据持久化**：接龙群组名单永久保存（除非手动删除），接龙事件及临时文件超过30天自动清理以节省空间。
    *   支持导入已保存的群组名单，快速发起接龙。

3.  **文件分享 (Share)**
    *   课件下载，投票互动。
    *   便捷的文件分享与分发功能。

4.  **文件压缩 (Compress)**
    *   微信文件，打包导出。
    *   支持图片、文档等文件的压缩处理。

## 技术栈

*   **前端**：微信小程序原生开发 (WXML, WXSS, JS, JSON)
*   **后端**：微信云开发 (WeChat Cloud Development)
    *   **云函数 (Cloud Functions)**：处理自动清理 (`autoClean`) 等后端逻辑。
    *   **云数据库 (Cloud Database)**：存储群组名单 (`draw_groups`)、接龙事件等结构化数据。
    *   **云存储 (Cloud Storage)**：存储用户上传的图片、文件等。

## 目录结构

```
project/
├── cloudfunctions/        # 云函数目录
│   ├── autoClean/         # 自动清理云函数
│   └── ...
├── miniprogram/           # 小程序端代码
│   ├── image/             # 图片资源 (如 background.jpg)
│   ├── pages/             # 页面目录
│   │   ├── index/         # 首页
│   │   ├── draw/          # 抽签助手
│   │   ├── solitaire/     # 接龙报名
│   │   ├── share/         # 文件分享
│   │   └── compress/      # 文件压缩
│   ├── app.js             # 全局逻辑
│   ├── app.json           # 全局配置
│   └── app.wxss           # 全局样式
├── project.config.json    # 项目配置文件
└── README.md              # 项目说明文档
```

## 部署说明

1.  **环境准备**
    *   下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)。
    *   使用微信扫码登录。

2.  **导入项目**
    *   打开微信开发者工具，选择“导入项目”，指向项目根目录。
    *   AppID：使用您注册的小程序 AppID。

3.  **云开发环境配置**
    *   点击工具栏的“云开发”按钮，开通云开发环境。
    *   **数据库集合创建**：
        *   进入“数据库” -> 点击“+”创建集合。
        *   必须创建集合：`draw_groups` (用于存储永久群组名单)。
        *   其他集合根据功能自动生成或按需创建 (如 `solitaire_events`)。
    *   **云函数部署**：
        *   在 `cloudfunctions` 目录上右键 -> 选择环境 -> “上传并部署：云端安装依赖”。

4.  **图片资源**
    *   请确保 `miniprogram/image/` 目录下存在 `background.jpg` 文件，作为首页背景图。

## 最近更新

*   **UI 优化**：首页改版为“构型助手”，采用全屏背景图设计，功能模块悬浮于背景之上，底部渐变过渡。
*   **交互优化**：移除了所有按钮的按压下沉动画，解决了输入时的键盘冲突问题。
*   **数据安全**：群组名单升级为云端存储，实现了数据的永久保存和多端同步。
*   **自动维护**：优化了自动清理逻辑，保留核心用户数据，仅清理过期临时文件。
